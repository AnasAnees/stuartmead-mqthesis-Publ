os: linux

# we use the R VM because it contains LaTeX and pandoc
language: r
#Speed up install
cache: packages 

# Get bibtex
addons:
  apt:
    packages:
    - texlive-bibtex-extra

before_install:
  - tlmgr install etoolbox
  - tlmgr install biblatex
  - tlmgr install bibtex8
  - tlmgr install txfonts
  - tlmgr install newtx
  - tlmgr install geometry
  - tlmgr install ccaption
  - tlmgr install quotchap
  - tlmgr install tex-gyre
  - tlmgr install tocbibind
  - tlmgr install graphics
  - tlmgr install amsmath
  - tlmgr install amsfonts
  - tlmgr install hyperref
  - tlmgr install fontaxes 
  
script:
# use xelatex to convert .tex to .pdf
# of course we could use pandoc for this also, but pdflatex generates nicer PDFs
  - xelatex -interaction=nonstopmode thesis.tex
  - bibtex thesis
  - xelatex -interaction=nonstopmode thesis.tex || true
  - xelatex -interaction=nonstopmode thesis.tex || true  

#after_success:
deploy:

# provider releases means GitHub Releases
  provider: releases
  api_key:
    secure: IhB9eYqCFnQ8WYBjnvn5+gNNawP3j3qD6KNVMcHlOxgz5Y7pwO2KxLsLYceSRZ7pEb41TGTnbm+M8erNY3MJvus4hICUpn6vundAMbsrQKRxJXfDj4g/A+UeVZl/+7eqpi4BSs/KLeQvB4KbI8ObN3f2gubdxKL/Gf0n8ck71bO34ivIZthHAlbweGg0Ew7jdcYwwz/tY4kdSPBdzdW+o1PjhwLaeMMHui1Bm6iDkZb4Vpxy0t847sWp8+hqoKnagOwK5uKG1iKotX/j8jj6KnE6WT8EhjpXc0BbUFr24iXCf8IcepPZ9k1FWu9KOYCPevAtBSa9LJmdcvYpG47In+1J0ylhi9dZRqHnB9PNibTCHiOkQUZf8YCHfjLv3d20tnZ1dDENJqi0fLjjEinzrUeB3PbgmxQRlMCzWReqW7K5umv371h1sw4wiImcKG3k/v2xGx4RVZxHnJIeqKAmAqDatynkSyl3UqbOSp9GpLGQPSl8jv4LntB+FRfTbDxGAv3wcO8Qv0c+xyRgH7jhuG97d2TaqlJv2uNgUyZd7mapNInho+HkcJPujhu9fwZI1Lq0sO7/zNS8opVkEzMEi7Co6lqBZV6IgIE2/9IPZFGjy18GfDbsCXxjaT5yxeNZXHe78LvWYD9fuH2etNKAjH+QBmfWGQEbBDadjH6eYKk=

# the list of files to upload
  file: 
    - "thesis.pdf"
  skip_cleanup: true
